<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Grant Bot AI – Demo Project</title>
    <meta
      name="description"
      content="A demo project to test Grant Bot AI with Anonymous, Free, and Premium user modes. Built with HTML, CSS, and JavaScript."
    />

    <link rel="stylesheet" href="styles.css" />
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }

      .accent {
        color: #00d1b2;
      }

      #button {
        text-align: center;
        margin: 30px 0;
      }

      #button button {
        margin: 10px;
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
        background: #00d1b2;
        color: white;
        transition: background 0.3s ease, transform 0.2s ease;
      }

      #button button:hover {
        background: #00a28a;
      }

      /* ✅ Active button */
      #button button.active {
        background: #0077cc;
        transform: scale(1.05);
      }

      /* ✅ Active card */
      .card.active {
        border: 2px solid #0077cc;
        box-shadow: 0 0 10px rgba(0, 119, 204, 0.3);
      }

      /* Email Modal Styles */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        width: 90%;
        max-width: 400px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .modal h3 {
        margin-top: 0;
        color: #333;
      }

      .modal p {
        margin-bottom: 20px;
        color: #666;
      }

      .email-input {
        width: 100%;
        padding: 12px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        box-sizing: border-box;
      }

      .modal-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      .modal-buttons button {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }

      .cancel-btn {
        background-color: #f5f5f5;
        color: #333;
      }

      .submit-btn {
        background-color: #00d1b2;
        color: white;
      }

      .submit-btn:hover {
        background-color: #00a28a;
      }

      .cancel-btn:hover {
        background-color: #e0e0e0;
      }
    </style>
  </head>

  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a class="logo" aria-label="Home"
          >Demo<span class="accent">Site</span></a
        >

        <button
          id="navToggle"
          class="nav-toggle"
          aria-expanded="false"
          aria-controls="primaryNav"
          aria-label="Toggle navigation"
        >
          ☰
        </button>

        <nav id="primaryNav" class="primary-nav" role="navigation">
          <ul>
            <li><a>Home</a></li>
            <li><a>Features</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <section id="hero" class="hero">
        <div class="container">
          <h1>Testing Grant Bot AI in a Demo Environment</h1>
          <p class="lead">
            This demo lets you test the Grant Bot AI in three modes: Anonymous,
            Free, and Premium users.
          </p>
        </div>
      </section>

      <!-- ✅ Button Section -->
      <section id="button" class="button">
        <h2>Select Chat Mode to Start</h2>
        <p>Choose a user type to test the bot’s behavior and access levels.</p>

        <button id="anonBtn">Anonymous User</button>
        <button id="freeBtn">Free User</button>
        <button id="premiumBtn">Premium User</button>
      </section>

      <section id="features" class="container features">
        <h2>Features</h2>
        <div class="cards">
          <article
            class="card"
            id="cardAnon"
            tabindex="0"
            aria-labelledby="card1-title"
          >
            <h3 id="card1-title">Anonymous User</h3>
            <p>
              Anonymous users can chat with the bot without logging in. Limited
              access only.
            </p>
          </article>

          <article
            class="card"
            id="cardFree"
            tabindex="0"
            aria-labelledby="card2-title"
          >
            <h3 id="card2-title">Free User</h3>
            <p>
              Free users are registered and can access more basic features of
              Grant Bot AI.
            </p>
          </article>

          <article
            class="card"
            id="cardPremium"
            tabindex="0"
            aria-labelledby="card3-title"
          >
            <h3 id="card3-title">Premium User</h3>
            <p>
              Premium users enjoy full access, priority responses, and advanced
              AI features.
            </p>
          </article>
        </div>
      </section>

      <footer class="site-footer">
        <div class="container">
          <p>
            © <span id="year"></span> Grant Bot AI — Built for testing and
            development.
          </p>
        </div>
      </footer>

      <!-- ✅ Dynamic Chat Iframe -->
      <iframe
        id="chatIframe"
        title="AI Chatbot"
        src="https://ai-chat-bot-five-sooty.vercel.app/chat"
        style="
          position: fixed;
          bottom: 20px;
          right: 20px;
          width: 500px;
          height: 1000px;
          border: none;
          z-index: 9999;
          background: transparent;
        "
        allow="clipboard-read; clipboard-write"
        sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
      ></iframe>
    </main>

    <!-- Email Input Modal -->
    <div id="emailModal" class="modal">
      <div class="modal-content">
        <h3 id="modalTitle">Enter Your Email</h3>
        <p id="modalDescription">Please enter your email address to continue as a Free user.</p>
        <input type="email" id="emailInput" class="email-input" placeholder="your@email.com" />
        <div class="modal-buttons">
          <button id="cancelBtn" class="cancel-btn">Cancel</button>
          <button id="submitBtn" class="submit-btn">Submit</button>
        </div>
      </div>
    </div>

    <!-- ✅ JavaScript -->
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();

      const iframe = document.getElementById("chatIframe");
      const emailModal = document.getElementById("emailModal");
      const emailInput = document.getElementById("emailInput");
      const modalTitle = document.getElementById("modalTitle");
      const modalDescription = document.getElementById("modalDescription");
      const cancelBtn = document.getElementById("cancelBtn");
      const submitBtn = document.getElementById("submitBtn");

      let currentMode = "";

      const buttons = {
        anon: document.getElementById("anonBtn"),
        free: document.getElementById("freeBtn"),
        premium: document.getElementById("premiumBtn"),
      };

      const cards = {
        anon: document.getElementById("cardAnon"),
        free: document.getElementById("cardFree"),
        premium: document.getElementById("cardPremium"),
      };

      function setActive(mode, email = "") {
        let url = "";
        
        if (mode === "anon") {
          url = "https://ai-chat-bot-five-sooty.vercel.app/chat";
        } else if (mode === "free") {
          url = `https://ai-chat-bot-five-sooty.vercel.app/chat?email=${encodeURIComponent(email)}`;
        } else if (mode === "premium") {
          url = `https://ai-chat-bot-five-sooty.vercel.app/chat?email=${encodeURIComponent(email)}`;
        }
        
        // ✅ Change iframe
        iframe.src = url;

        // ✅ Remove active class from all buttons and cards
        Object.values(buttons).forEach((btn) => btn.classList.remove("active"));
        Object.values(cards).forEach((card) => card.classList.remove("active"));

        // ✅ Add active class to clicked button and corresponding card
        buttons[mode].classList.add("active");
        cards[mode].classList.add("active");
      }

      function showEmailModal(mode) {
        currentMode = mode;
        
        if (mode === "free") {
          modalTitle.textContent = "Enter Your Email for Free Access";
          modalDescription.textContent = "Please enter your email address to continue as a Free user.";
        } else if (mode === "premium") {
          modalTitle.textContent = "Enter Your Email for Premium Access";
          modalDescription.textContent = "Please enter your email address to continue as a Premium user.";
        }
        
        emailInput.value = "";
        emailModal.style.display = "flex";
        emailInput.focus();
      }

      function hideEmailModal() {
        emailModal.style.display = "none";
      }

      function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
      }

      // ✅ Button events
      buttons.anon.addEventListener("click", () => setActive("anon"));
      buttons.free.addEventListener("click", () => showEmailModal("free"));
      buttons.premium.addEventListener("click", () => showEmailModal("premium"));

      // Modal events
      cancelBtn.addEventListener("click", hideEmailModal);
      
      submitBtn.addEventListener("click", () => {
        const email = emailInput.value.trim();
        
        if (!email) {
          alert("Please enter your email address.");
          return;
        }
        
        if (!validateEmail(email)) {
          alert("Please enter a valid email address.");
          return;
        }
        
        setActive(currentMode, email);
        hideEmailModal();
      });
      
      // Close modal when clicking outside
      emailModal.addEventListener("click", (e) => {
        if (e.target === emailModal) {
          hideEmailModal();
        }
      });
      
      // Submit on Enter key
      emailInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          submitBtn.click();
        }
      });

      // Responsive nav toggle
      const navToggle = document.getElementById("navToggle");
      const primaryNav = document.getElementById("primaryNav");
      navToggle.addEventListener("click", () => {
        const expanded =
          navToggle.getAttribute("aria-expanded") === "true" || false;
        navToggle.setAttribute("aria-expanded", !expanded);
        primaryNav.classList.toggle("open");
      });
    </script>
  </body>
</html>